(function(e){var t=1;e.fn.youTubeEmbed=function(t,n,r,i,s){var o=t;typeof t=="string"&&(t={video:t});var u={width:n,height:r,progressBar:!0};t=e.extend(u,t);var a={originalDIV:this,container:null,control:null,player:null,progress:null,elapsed:null};try{t.videoID=t.video.match(/v=(.{11})/)[1],t.safeID=s}catch(f){return a.originalDIV}var l="http://gdata.youtube.com/feeds/api/videos/"+t.videoID+"?v=2&alt=jsonc";return e.get(l,function(n){var r=n.data;t.ratio=9/16,r.aspectRatio=="widescreen"&&(t.ratio=9/16);var o=Math.round(t.width*t.ratio);a.container=e("<div>",{"class":"flashContainer",css:{width:t.width,height:o+32}}).appendTo(a.originalDIV),a.container.flash({swf:"http://www.youtube.com/v/"+t.videoID+"?version=3&enablejsapi=1&rel=0&showinfo=0&autohide=0&fs=0",id:"video_"+t.safeID,height:o+32,width:t.width,duration:r.duration,allowScriptAccess:"always",allowFullScreen:!1,wmode:"opaque",flashvars:{video_id:t.videoID,playerapiid:t.safeID,fs:0}}),a.player=a.container.flash().get(0),console.log("plaer is"+a.player),a.control=e("<div>",{"class":"controlDiv play",style:"display:none;"}).appendTo(a.container.parent());if(i=="small")var u=e("<div>",{"class":"fullscreenDiv full"}).appendTo(a.container);else var u=e("<div>",{"class":"fullscreenDiv small"}).appendTo(a.container);var f=e("<div>",{"class":"confusedDiv",onclick:"confused('video_"+s+"')"}).appendTo(a.container),l=e("<div>",{"class":"questionDiv",onclick:"fading('video_"+s+"')"}).appendTo(a.container),c=e("<div>",{"class":"shortcutDiv",onclick:"shortcuts('video_"+s+"')"}).appendTo(a.container),h=e("<div>",{"class":"highlight_play"}).appendTo(a.container),p=e("<div>",{id:"conf_video_"+s,style:"display:none;","class":"hidden_div"}).appendTo(a.container),d=e("<input>",{type:"text",id:"confusedQues_video_"+s,placeholder:"Enter Question",style:"margin-top:15px;margin-bottom:3px;line-height:10px;font-size:10px;width:150px;height:13px;",name:"confusedQues",required:"true"}).appendTo(p),v=e("<input>",{type:"button",onclick:"confusedQuestion('video_"+s+"')","class":"btn btn-primary",style:"height:25px;margin-bottom:-12px;line-height:10px;font-size:10px;",value:"Ask"}).appendTo(p),m=e("<div>",{id:"short_video_"+s,style:"display:none","class":"well hidden_shortcuts"}).appendTo(a.container),g=e("<div>",{id:"confused_notify_video_"+s,"class":"confused_notif"}).appendTo(a.container);e("#dur").html(formatSecondsAsTime(r.duration)),window.onresize=function(){e("#page").css("position")=="fixed"&&resize()},resize=function(){e("#video_youVideo").css("margin-left","0px"),e("#ontop_video_youVideo").css("margin-left","0px"),e("body").css("overflow","hidden"),e("#page").css("position","fixed"),e("#page").css({top:0,left:0}),e("#page").css({"margin-top":"0px"}),e("#ontop_video_youVideo").css("z-index",1050),e("#ontop_video_youVideo").css("margin-top","0px"),e("#video_youVideo").css("margin-top","0px"),e("#player").width(e(window).width()),e("#page").width(e(window).width()),e("#page").css("z-index",1035),e("#player").css("z-index",1040),e(".flashContainer").width(e(window).width()),e(".flashContainer").css("margin","0px"),e(".flashContainer").css("background-color","black"),e("#page").height(e(window).height()),e("#player").height(e(window).height()),e("#ontop_video_youVideo").height(e(window).height()-33),e(".flashContainer").height(e(window).height()),e("#video_youVideo").height(e(window).height());var t=e(window).height()-32;e("#video_youVideo").width(e(window).width()),e("#ontop_video_youVideo").width((t-1)*16/9);if(e("#ontop_video_youVideo").width()>e(window).width()){e("#ontop_video_youVideo").width(e(window).width()),e("#ontop_video_youVideo").height(e(window).width()*9/16);var n=(e(".flashContainer").height()-32-e("#ontop_video_youVideo").height())/2;e("#ontop_video_youVideo").css("margin-top",n+"px")}else{var n=(e(".flashContainer").width()-(e("#video_youVideo").height()-32)*16/9)/2;e("#ontop_video_youVideo").css("margin-left",n+"px")}if(flag==1)for(var r=0;r<list_of_points.length;r++){var i=e("#"+list_of_points[r][0]),s=parseFloat(list_of_points[r][2]*e("#ontop_video_youVideo").height()),o=parseFloat(list_of_points[r][1]*e("#ontop_video_youVideo").width())+.005*e("#ontop_video_youVideo").width();i.css({top:s+"px",left:o+"px"})}},e(".fullscreenDiv.full").click(function(){e(this).removeClass("full"),e(this).addClass("small"),e(".fullscreenDiv.small").unbind(),bind_small(),resize()}),bind_small=function(){e(".fullscreenDiv.small").click(function(){e(this).removeClass("small"),e(this).addClass("full"),e("body").css("overflow","auto"),e("#page").css("position","static"),e("#ontop_video_youVideo").css("z-index",2),e("#ontop_video_youVideo").css("margin-top","40px"),e("#player").width(800),e("#page").width(800),e("#player").css("z-index",0),e("#page").css("z-index",0),e("#page").css({"margin-top":"-40px"}),e(".flashContainer").width(800),e(".flashContainer").css("margin","40px auto"),e(".flashContainer").css("background-color","black"),e("#page").height(600),e("#player").height(500),e("#ontop_video_youVideo").height(448),e(".flashContainer").height(482),e("#video_youVideo").height(482),e("#video_youVideo").width(800),e("#ontop_video_youVideo").width(800),e("#video_youVideo").css("margin-left","0px"),e("#ontop_video_youVideo").css("margin-left","0px"),e("#video_youVideo").css("margin-top","0px");if(flag==1)for(var t=0;t<list_of_points.length;t++){var n=e("#"+list_of_points[t][0]),r=parseFloat(list_of_points[t][2]*e("#ontop_video_youVideo").height()),i=parseFloat(list_of_points[t][1]*e("#ontop_video_youVideo").width())+.005*e("#ontop_video_youVideo").width();n.css({top:r+"px",left:i+"px"})}e(".fullscreenDiv.full").unbind(),e(".fullscreenDiv.full").click(function(){e(this).removeClass("full"),e(this).addClass("small"),e(".fullscreenDiv.small").unbind(),bind_small(),resize()})})},e("#confusedQues_video_"+s).bind("keyup",function(e){e.keyCode===13&&confusedQuestion("video_"+s)}),t.progressBar&&(a.progress=e("<div>",{"class":"progressBar",style:"display:none"}).appendTo(a.container.parent()),a.elapsed=e("<div>",{"class":"elapsed",style:"display:none"}).appendTo(a.progress),a.progress.click(function(e){var t=(e.pageX-a.progress.offset().left)/a.progress.outerWidth();return a.elapsed.width(t*100+"%"),a.player.seekTo(Math.round(r.duration*t),!0),!1}));var y=!1;paused=!1,buffering=!1,window["eventListener_"+t.safeID]=function(e){console.log("time is "+a.player.getCurrentTime());var n;console.log(a.player.getPlayerState()),a.player.getPlayerState()==1?(remove_lecture_buttons(),buffering=!1,paused=!1,a.control.removeClass("play replay").addClass("pause"),a.container.addClass("playing"),t.progressBar&&(n=window.setInterval(function(){a.elapsed.width(a.player.getCurrentTime()/r.duration*100+"%")},1e3))):a.player.getPlayerState()==2?(console.log("in pause"),buffering!=1&&paused==0&&(console.log("inside method"),pause(a.player.getCurrentTime())),a.control.removeClass("pause").addClass("play"),a.container.removeClass("playing"),buffering=!1,paused=!0,t.progressBar&&window.clearInterval(n)):a.player.getPlayerState()==3&&(buffering=!0),e==-1&&(console.log("time is "+a.player.getCurrentTime()),y?a.container.hasClass("playing")&&a.control.click():(a.control.click(function(){a.container.hasClass("playing")?(a.control.removeClass("pause").addClass("play"),a.container.removeClass("playing"),a.player.pauseVideo(),pause(a.player.getCurrentTime()),t.progressBar&&window.clearInterval(n)):(a.control.removeClass("play replay").addClass("pause"),a.container.addClass("playing"),a.player.playVideo(),t.progressBar&&(n=window.setInterval(function(){a.elapsed.width(a.player.getCurrentTime()/r.duration*100+"%")},1e3)))}),y=!0)),e==0&&(a.control.removeClass("pause").addClass("replay"),a.container.removeClass("playing"),add_lecture_buttons())},window.onYouTubePlayerReady||(window.onYouTubePlayerReady=function(t){var n=window.setInterval(function(){checkTime("video_"+t,e(document.getElementById("video_"+t)).children("param[name='duration']:first").val())},100);console.log("int is "+n),document.getElementById("video_"+t).playVideo(),document.getElementById("video_"+t).setPlaybackQuality("large"),document.getElementById("video_"+t).addEventListener("onStateChange","eventListener_"+t)})},"jsonp"),a.originalDIV}})(jQuery);
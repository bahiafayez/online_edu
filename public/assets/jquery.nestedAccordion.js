/* ---------------------------------------------
Nested Accordion v.1.4.7.3
Script to create 'accordion' functionality on a hierarchically structured content.
http://www.adipalaz.com/experiments/jquery/nested_accordion.html
Requires: jQuery v1.4.2+
Copyright (c) 2009 Adriana Palazova
Dual licensed under the MIT (http://www.adipalaz.com/docs/mit-license.txt) and GPL (http://www.adipalaz.com/docs/gpl-license.txt) licenses.
------------------------------------------------ */
(function(e){e.fn.orphans=function(){var t=[];return this.each(function(){e.each(this.childNodes,function(){this.nodeType==3&&e.trim(this.nodeValue)&&t.push(this)})}),e(t)},e.fn.accordion=function(t){var n=e.extend({},e.fn.accordion.defaults,t);return this.each(function(){function b(t){for(var n=0,r=arguments.length;n<r;n++){var i=arguments[n],s=e(i);if(s.scrollTop()>0)return i;s.scrollTop(1);var o=s.scrollTop()>0;s.scrollTop(0);if(o)return i}return[]}var t=n.container?"#"+this.id:"",r=n.objID?n.objID:n.obj+n.objClass,i=n.container?t+" "+r:"#"+this.id,s=i+" "+n.el,u=null;n.head&&e(i).find(n.head).addClass("h"),n.head&&(e(s).next("div:not(.outer)").length&&e(s).next("div:not(.outer)").wrap('<div class="outer" />'),e(i+" .h").each(function(){var t=e(this);n.wrapper=="div"&&!t.parent("div.new").length&&t.add(t.next("div.outer")).wrapAll('<div class="new"></div>')})),e(s).each(function(){var t=e(this);if(t.find(n.next).length||t.next(n.next).length){var r='<a class="trigger" style="display:block" href="#" />';if(n.elToWrap){var i=t.orphans(),s=t.find(n.elToWrap);i.add(s).wrapAll(r)}else t.orphans().wrap(r)}else t.addClass("last-child"),n.lastChild&&t.find("> a").length&&t.find("> a").addClass("trigger").css("display","block")}),e(s+" a.trigger").closest(n.wrapper).find("> "+n.next).not(".shown").hide().closest(n.wrapper).find("a.open").removeClass("open").data("state",0);if(n.activeLink){var a,f=window.location.href,l=window.location.pathname.split("/"),c=l[l.length-1];n.uri=="full"?a=f:a=c,e(i+' a:not([href $= "#"])[href$="'+a+'"]').addClass("active").parent().attr("id","current").closest(n.obj).addClass("current");if(n.shift&&e(i+" a.active").closest(n.wrapper).prev(n.wrapper).length){var h=e(i+" a.active").closest(n.wrapper),p=h.nextAll().andSelf(),d=h.siblings(n.wrapper),v=d.filter(":first");(n.shift=="clicked"||n.shift=="all"&&d.length)&&h.insertBefore(v).addClass("shown").siblings(n.wrapper).removeClass("shown"),n.shift=="all"&&d.length>1&&p.insertBefore(v)}}n.initShow&&(e(i).find(n.initShow).show().addClass("shown").parents(i+" "+n.next).show().addClass("shown").end().parents(n.wrapper).find("> a.trigger, > "+n.el+" a.trigger").addClass("open").data("state",1),n.expandSub&&e(i+" "+n.initShow).children(n.next).show().end().find("> a").addClass("open").data("state",1));if(n.event=="click")var m="click";else{if(n.focus)var g=" focus";else var g="";var m="mouseenter"+g}var y;typeof b=="function"?y=b("html","body"):y="html, body",e(i).delegate("a.trigger",m,function(t){function p(t){a.length&&r.data("state")&&n.collapsible&&(r.removeClass("open"),a.filter(":visible")[n.hideMethod](n.hideSpeed,function(){r.data("state",0)}));if(a.length&&!r.data("state")||!a.length&&r.closest(n.wrapper).not(".shown"))n.standardExpansible||(f.find("> a.open, >"+n.el+" a.open").removeClass("open").data("state",0).end().find("> "+n.next+":visible")[n.hideMethod](n.hideSpeed),h&&h<e(window).scrollTop()&&e(y).animate({scrollTop:h},n.scrollSpeed)),r.addClass("open"),a.filter(":hidden")[n.showMethod](n.showSpeed,function(){r.data("state",1)});if(n.shift&&i.prev(n.wrapper).length){var s=i.nextAll().andSelf(),u=f.filter(":first");(n.shift=="clicked"||n.shift=="all"&&f.length)&&i.insertBefore(u).addClass("shown").siblings(n.wrapper).removeClass("shown"),n.shift=="all"&&f.length>1&&s.insertBefore(u)}}var r=e(this),i=r.closest(n.wrapper),a=i.find("> "+n.next),f=i.siblings(n.wrapper),l=e(s+" a.trigger"),c=i.siblings(n.wrapper).find(">"+n.next+":visible"),h;c.length?h=c.offset().top:h=!1;if(n.event=="click")return p(l),r.is('[href $= "#"]')?!1:e.isFunction(n.retFunc)?n.retFunc(r):!0;n.event!="click"&&(u=window.setTimeout(function(){p(l)},n.interval),r.click(function(){r.blur();if(r.attr("href")=="#")return r.blur(),!1}))}),n.event!="click"&&e(i).delegate("a.trigger","mouseleave",function(){window.clearTimeout(u)})})},e.fn.accordion.defaults={container:!0,obj:"ul",objClass:".accordion",objID:"",wrapper:"li",el:"li",head:"",next:"ul",initShow:"",expandSub:!0,showMethod:"slideDown",hideMethod:"slideUp",showSpeed:400,hideSpeed:800,scrollSpeed:600,activeLink:!0,event:"click",focus:!0,interval:400,collapsible:!0,standardExpansible:!1,lastChild:!0,shift:!1,elToWrap:null,uri:"full",retFunc:null},e.fn.slideFadeDown=function(e,t){return this.animate({opacity:"show",height:"show"},e,function(){jQuery.browser.msie&&this.style.removeAttribute("filter"),jQuery.isFunction(t)&&t()})},e.fn.slideFadeUp=function(e,t){return this.animate({opacity:"hide",height:"hide"},e,function(){jQuery.browser.msie&&this.style.removeAttribute("filter"),jQuery.isFunction(t)&&t()})}})(jQuery);
(function(e){var t=1;e.fn.youTubeEmbed=function(n,r,i,s,o){var u=n;typeof n=="string"&&(n={video:n});var a={width:r,height:i,progressBar:!0};n=e.extend(a,n);var f={originalDIV:this,container:null,control:null,player:null,progress:null,elapsed:null};try{n.videoID=n.video.match(/v=(.{11})/)[1],n.safeID=o}catch(l){return f.originalDIV}var c="http://gdata.youtube.com/feeds/api/videos/"+n.videoID+"?v=2&alt=jsonc";return e.get(c,function(i){var a=i.data;n.ratio=.75,a.aspectRatio=="widescreen"&&(n.ratio=9/16);var l=Math.round(n.width*n.ratio);f.container=e("<div>",{"class":"flashContainer",css:{width:n.width,height:n.height}}).appendTo(f.originalDIV),f.container.flash({swf:"http://www.youtube.com/apiplayer?enablejsapi=1&version=3",id:"video_"+n.safeID,height:l,width:n.width,duration:a.duration,allowScriptAccess:"always",wmode:"transparent",flashvars:{video_id:n.videoID,playerapiid:n.safeID}}),f.player=f.container.flash().get(0),console.log(f.player);var c=e("<div>",{"class":"timer",style:"width:"+r+"px",id:"timer_video_"+o}).appendTo(f.container);f.control=e("<div>",{"class":"controlDiv play"}).appendTo(f.container);if(s=="small")var h=e("<div>",{"class":"fullscreenDiv full"}).appendTo(f.container);else var h=e("<div>",{"class":"fullscreenDiv small"}).appendTo(f.container);var p=e("<div>",{"class":"confusedDiv",onclick:"confused('video_"+o+"')"}).appendTo(f.container),d=e("<div>",{"class":"questionDiv",onclick:"fading('video_"+o+"')"}).appendTo(f.container),v=e("<div>",{"class":"shortcutDiv",onclick:"shortcuts('video_"+o+"')"}).appendTo(f.container),m=e("<div>",{id:"conf_video_"+o,style:"display:none;","class":"hidden_div"}).appendTo(f.container),g=e("<input>",{type:"text",id:"confusedQues_video_"+o,placeholder:"Enter Question",style:"margin-top:8px;width:150px;height:15px;",name:"confusedQues",required:"true"}).appendTo(m),y=e("<input>",{type:"button",onclick:"confusedQuestion('video_"+o+"')","class":"btn btn-primary",style:"height:25px;margin-bottom:2px",value:"Ask"}).appendTo(m),b=e("<div>",{id:"short_video_"+o,style:"display:none","class":"well hidden_shortcuts"}).appendTo(f.container),w=e("<div>",{id:"confused_notify_video_"+o,"class":"confused_notif"}).appendTo(f.container);e("#dur").html(formatSecondsAsTime(a.duration)),e("#timer_video_"+o).html("<p style='float:left;margin-left:60px;left:50px;line-height:60px;color:gray'>"+formatSecondsAsTime(0)+"</p> <p style='float:left;margin-left:0px;line-height:60px;color:gray'> / "+formatSecondsAsTime(a.duration)+"</p>"),e(".fullscreenDiv.full").click(function(){console.log(u),t==1&&(e("#player2").youTubeEmbed(u,832,520,"big","bigVideo"),t=0),e("#myModal2").modal("show")}),e(".fullscreenDiv.small").click(function(){e("#myModal2").modal("hide"),f.player.pauseVideo()}),e("#confusedQues_video_"+o).bind("keyup",function(e){e.keyCode===13&&confusedQuestion("video_"+o)}),n.progressBar&&(f.progress=e("<div>",{"class":"progressBar"}).appendTo(f.container),f.elapsed=e("<div>",{"class":"elapsed"}).appendTo(f.progress),f.progress.click(function(e){var t=(e.pageX-f.progress.offset().left)/f.progress.outerWidth();return f.elapsed.width(t*100+"%"),f.player.seekTo(Math.round(a.duration*t),!0),!1}));var E=!1;window["eventListener_"+n.safeID]=function(e){console.log("time is "+f.player.getCurrentTime());var t;console.log(f.player.getPlayerState()),f.player.getPlayerState()==1?(f.control.removeClass("play replay").addClass("pause"),f.container.addClass("playing"),n.progressBar&&(t=window.setInterval(function(){f.elapsed.width(f.player.getCurrentTime()/a.duration*100+"%")},1e3))):f.player.getPlayerState()==2&&(f.control.removeClass("pause").addClass("play"),f.container.removeClass("playing"),n.progressBar&&window.clearInterval(t)),e==-1&&(console.log("time is "+f.player.getCurrentTime()),E?f.container.hasClass("playing")&&f.control.click():(f.control.click(function(){f.container.hasClass("playing")?(f.control.removeClass("pause").addClass("play"),f.container.removeClass("playing"),f.player.pauseVideo(),pause(f.player.getCurrentTime()),n.progressBar&&window.clearInterval(t)):(f.control.removeClass("play replay").addClass("pause"),f.container.addClass("playing"),f.player.playVideo(),n.progressBar&&(t=window.setInterval(function(){f.elapsed.width(f.player.getCurrentTime()/a.duration*100+"%")},1e3)))}),E=!0)),e==0&&(f.control.removeClass("pause").addClass("replay"),f.container.removeClass("playing"))},window.onYouTubePlayerReady||(window.onYouTubePlayerReady=function(t){var n=window.setInterval(function(){checkTime("video_"+t,e(document.getElementById("video_"+t)).children("param[name='duration']:first").val())},100);console.log(n),document.getElementById("video_"+t).setPlaybackQuality("large"),document.getElementById("video_"+t).addEventListener("onStateChange","eventListener_"+t),console.log(("video_"+t).getCurrentTime())})},"jsonp"),f.originalDIV}})(jQuery);
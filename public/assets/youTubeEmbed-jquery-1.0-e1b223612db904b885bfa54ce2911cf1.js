(function(e){var t=1;e.fn.youTubeEmbed=function(t,n,r,i,s){var o=t;typeof t=="string"&&(t={video:t});var u={width:n,height:r,progressBar:!0};t=e.extend(u,t);var a={originalDIV:this,container:null,control:null,player:null,progress:null,elapsed:null};try{t.videoID=t.video.match(/v=(.{11})/)[1],t.safeID=s}catch(f){return a.originalDIV}var l="http://gdata.youtube.com/feeds/api/videos/"+t.videoID+"?v=2&alt=jsonc";return e.get(l,function(r){var o=r.data;t.ratio=9/16,o.aspectRatio=="widescreen"&&(t.ratio=9/16);var u=Math.round(t.width*t.ratio);a.container=e("<div>",{"class":"flashContainer",css:{width:t.width,height:t.height}}).appendTo(a.originalDIV),a.container.flash({swf:"http://www.youtube.com/apiplayer?enablejsapi=1&version=3",id:"video_"+t.safeID,height:u,width:t.width,duration:o.duration,allowScriptAccess:"always",wmode:"transparent",flashvars:{video_id:t.videoID,playerapiid:t.safeID}}),a.player=a.container.flash().get(0),console.log(a.player);var f=e("<div>",{"class":"timer",style:"width:"+n+"px",id:"timer_video_"+s}).appendTo(a.container);a.control=e("<div>",{"class":"controlDiv play"}).appendTo(a.container);if(i=="small")var l=e("<div>",{"class":"fullscreenDiv full"}).appendTo(a.container);else var l=e("<div>",{"class":"fullscreenDiv small"}).appendTo(a.container);var c=e("<div>",{"class":"confusedDiv",onclick:"confused('video_"+s+"')"}).appendTo(a.container),h=e("<div>",{"class":"questionDiv",onclick:"fading('video_"+s+"')"}).appendTo(a.container),p=e("<div>",{"class":"shortcutDiv",onclick:"shortcuts('video_"+s+"')"}).appendTo(a.container),d=e("<div>",{id:"conf_video_"+s,style:"display:none;","class":"hidden_div"}).appendTo(a.container),v=e("<input>",{type:"text",id:"confusedQues_video_"+s,placeholder:"Enter Question",style:"margin-top:8px;width:150px;height:15px;",name:"confusedQues",required:"true"}).appendTo(d),m=e("<input>",{type:"button",onclick:"confusedQuestion('video_"+s+"')","class":"btn btn-primary",style:"height:25px;margin-bottom:2px",value:"Ask"}).appendTo(d),g=e("<div>",{id:"short_video_"+s,style:"display:none","class":"well hidden_shortcuts"}).appendTo(a.container),y=e("<div>",{id:"confused_notify_video_"+s,"class":"confused_notif"}).appendTo(a.container);e("#dur").html(formatSecondsAsTime(o.duration)),e("#timer_video_"+s).html("<p style='float:left;margin-left:60px;left:50px;line-height:60px;color:gray'>"+formatSecondsAsTime(0)+"</p> <p style='float:left;margin-left:0px;line-height:60px;color:gray'> / "+formatSecondsAsTime(o.duration)+"</p>"),window.onresize=function(){e("#page").css("position")=="fixed"&&resize()},resize=function(){e("body").css("overflow","hidden"),e("#page").css("position","fixed"),e("#page").css({top:0,left:0}),e("#timer_video_youVideo").width(e(window).width()),e("#ontop_video_youVideo").css("z-index",1050),e("#ontop_video_youVideo").css("margin-top","0px"),e("#player").width(e(window).width()),e("#page").width(e(window).width()),e("#player").css("z-index",1040),e(".flashContainer").width(e(window).width()),e(".flashContainer").css("margin","0px"),e(".flashContainer").css("background-color","black"),e("#page").height(e(window).height()),e("#player").height(e(window).height()),e("#ontop_video_youVideo").height(e(window).height()-50),e(".flashContainer").height(e(window).height()),e("#video_youVideo").height(e(window).height()-50);var t=e(window).height()-50;e("#video_youVideo").width(t*16/9),e("#ontop_video_youVideo").width(t*16/9);var n=(e(".flashContainer").width()-e("#video_youVideo").width())/2;e("#video_youVideo").css("margin-left",n+"px"),e("#ontop_video_youVideo").css("margin-left",n+"px");if(flag==1)for(var r=0;r<list_of_points.length;r++){var i=e("#"+list_of_points[r][0]),s=parseFloat(list_of_points[r][2]*e("#ontop_video_youVideo").height()),o=parseFloat(list_of_points[r][1]*e("#ontop_video_youVideo").width());i.css({top:s+"px",left:o+"px"})}},e(".fullscreenDiv.full").click(function(){e(this).removeClass("full"),e(this).addClass("small"),e(".fullscreenDiv.small").unbind(),bind_small(),resize()}),bind_small=function(){e(".fullscreenDiv.small").click(function(){e(this).removeClass("small"),e(this).addClass("full"),e("body").css("overflow","auto"),e("#page").css("position","static"),e("#timer_video_youVideo").width(800),e("#ontop_video_youVideo").css("z-index",2),e("#ontop_video_youVideo").css("margin-top","40px"),e("#player").width(800),e("#page").width(800),e("#player").css("z-index",0),e(".flashContainer").width(800),e(".flashContainer").css("margin","40px auto"),e(".flashContainer").css("background-color","black"),e("#page").height(500),e("#player").height(500),e("#ontop_video_youVideo").height(450),e(".flashContainer").height(500),e("#video_youVideo").height(450),e("#video_youVideo").width(800),e("#ontop_video_youVideo").width(800),e("#video_youVideo").css("margin-left","0px"),e("#ontop_video_youVideo").css("margin-left","0px");if(flag==1)for(var t=0;t<list_of_points.length;t++){var n=e("#"+list_of_points[t][0]),r=parseFloat(list_of_points[t][2]*e("#ontop_video_youVideo").height()),i=parseFloat(list_of_points[t][1]*e("#ontop_video_youVideo").width());n.css({top:r+"px",left:i+"px"})}e(".fullscreenDiv.full").unbind(),e(".fullscreenDiv.full").click(function(){e(this).removeClass("full"),e(this).addClass("small"),e(".fullscreenDiv.small").unbind(),bind_small(),resize()})})},e("#confusedQues_video_"+s).bind("keyup",function(e){e.keyCode===13&&confusedQuestion("video_"+s)}),t.progressBar&&(a.progress=e("<div>",{"class":"progressBar"}).appendTo(a.container),a.elapsed=e("<div>",{"class":"elapsed"}).appendTo(a.progress),a.progress.click(function(e){var t=(e.pageX-a.progress.offset().left)/a.progress.outerWidth();return a.elapsed.width(t*100+"%"),a.player.seekTo(Math.round(o.duration*t),!0),!1}));var b=!1;window["eventListener_"+t.safeID]=function(e){console.log("time is "+a.player.getCurrentTime());var n;console.log(a.player.getPlayerState()),a.player.getPlayerState()==1?(a.control.removeClass("play replay").addClass("pause"),a.container.addClass("playing"),t.progressBar&&(n=window.setInterval(function(){a.elapsed.width(a.player.getCurrentTime()/o.duration*100+"%")},1e3))):a.player.getPlayerState()==2&&(a.control.removeClass("pause").addClass("play"),a.container.removeClass("playing"),t.progressBar&&window.clearInterval(n)),e==-1&&(console.log("time is "+a.player.getCurrentTime()),b?a.container.hasClass("playing")&&a.control.click():(a.control.click(function(){a.container.hasClass("playing")?(a.control.removeClass("pause").addClass("play"),a.container.removeClass("playing"),a.player.pauseVideo(),pause(a.player.getCurrentTime()),t.progressBar&&window.clearInterval(n)):(a.control.removeClass("play replay").addClass("pause"),a.container.addClass("playing"),a.player.playVideo(),t.progressBar&&(n=window.setInterval(function(){a.elapsed.width(a.player.getCurrentTime()/o.duration*100+"%")},1e3)))}),b=!0)),e==0&&(a.control.removeClass("pause").addClass("replay"),a.container.removeClass("playing"))},window.onYouTubePlayerReady||(window.onYouTubePlayerReady=function(t){var n=window.setInterval(function(){checkTime("video_"+t,e(document.getElementById("video_"+t)).children("param[name='duration']:first").val())},100);console.log(n),document.getElementById("video_"+t).setPlaybackQuality("large"),document.getElementById("video_"+t).addEventListener("onStateChange","eventListener_"+t),console.log(("video_"+t).getCurrentTime())})},"jsonp"),a.originalDIV}})(jQuery);